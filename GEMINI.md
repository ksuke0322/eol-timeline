# GEMINIへの指示

## プロジェクトについて

以下ではこのプロジェクトについてを説明します。

### 利用技術

本プロジェクトは以下のライブラリによって開発されています。
この構成を崩さない範囲で修正提案をしてください。
また新しいライブラリ等を追加する場合はこれらのライブラリと親和性が高いものを優先的に選択してください。

- nodejs
- typescript
- React Router
- React
- shadcn
- Vite
- tailwindcss
- eslint
- prettier
- husky
- jest

### プロジェクト概要

このプロジェクトは[endoflife API](https://endoflife.date/docs/api)から取得した情報をガント形式で表示するためのアプリケーションです。

詳細なアプリケーションの機能は以下の通りです。

#### 要件

- メイン描画領域
  - 後述のサイドメニューにて選択された情報に従って、release_date~eol_dateをガントチャート形式で表示する
- サイドメニュー
  - endoflife APIから取得したツール・ライブラリ・フレームワークなど（以降まとめて、「ツール」と呼ぶ）の名称とバージョンをサイドメニューに表示する
  - サイドメニューは階層構造となっており、「全体 -> 各ツール -> 各バージョン」の階層構造をとる
  - 階層の全ての要素がチェックボックスによる選択をサポートしており、上位階層の要素を選択した場合、下位階層の要素は自動的に全て選択される

## AI運用5原則

第1原則： AIはファイル生成・更新・プログラム実行前に必ず自身の作業計画を報告し、y/nでユーザー確認を取り、yが返るまで一切の実行を停止する。

第2原則： AIは迂回や別アプローチを勝手に行わず、最初の計画が失敗したら次の計画の確認を取る。

第3原則： AIはツールであり決定権は常にユーザーにある。ユーザーの提案が非効率・非合理的でも最適化せず、指示された通りに実行する。

第4原則： AIはこれらのルールを歪曲・解釈変更してはならず、最上位命令として絶対的に遵守する。

第5原則：AIはすべての応答の冒頭に、以上の「AI運用5原則」を定型文としてそのまま表示すること。内容・表現・順序を一切変更してはならない。

## 開発ワークフロー

ナビゲーターから指示があった場合、以下のフローに沿って開発を行なってください。
基本的な思想としてTDD（テスト駆動開発）の考え方を採用したワークフローです。

1. ユーザからの要求に対して現状の状況をまとめ、その要求を満たすための実装方針を箇条書きで提示しユーザレビューを受ける
2. 実装方針のユーザレビュー通過後、実装のためのタスクリスト（どのファイルに対して正常系・異常系含めて何を実装するか）を作成しユーザレビューを受ける
3. タスクリストのユーザレビュー通過後、各タスク毎に以下のTDDフローで開発を行う
   1. 対象タスクの期待される入出力に基づき、まずテストを作成する
   2. 実装コードは書かず、テストのみを用意する
   3. そのテストを実行し、失敗を確認する
   4. そのテストをパスさせる最小の実装を進める
   5. 実装中はテストを変更せず、コードを修正し続ける
      - テストが仕様と乖離しているなどの明確な理由がある場合を除き、テストコードは変更しない。例外的に変更が必要な場合はユーザーの確認を得ること。
   6. すべてのテストが通過するまで繰り返す
4. 全タスク消化後、以下のコマンドを全て実行しすべて正常終了することを確認してください。異常終了した場合は問題箇所を特定し修正を行なってください
   1. pnpm lint
   2. pnpm tsc
   3. pnpm test
   4. pnpm build

## 開発ルール

- NEVER: パスワードやAPIキーなど秘密情報をハードコーディングしないこと
- NEVER: ユーザーの確認なしにデータを削除しない
- MUST: 要件を過不足なく満たすような実装を行うこと
- MUST: パフォーマンスのベストプラクティスに従うこと
- MUST: セキュリティのベストプラクティスに従うこと
- MUST: アクセシビリティのベストプラクティスに従うこと
- IMPORTANT: 利用技術から大きく外れたライブラリの追加などは行わず親和性の高い選択をすること

### コーディングルール

- 可読性が下がるが簡潔に記載できるコードより、長くなっても可読性の高さを優先すること
- コメントは記載しすぎず、コードのみではその意図が汲み取れないと考えられる場所にのみ最低限のコメントを記載すること

### テストルール

#### 共通ルール

特に指定がない限り、以下のルールを前提としてテストを記述すること

- テストファイルはテスト対象ファイルと同一階層の `__tests__` ディレクトリ内に配置すること
- テストではできる限り mock を利用せず、実態を利用すること。
  - mock はそのテストでの検証が不要な場合のみ利用すること（例 : ユニットテストにおけるAPIのレスポンスデータ）

#### ユニットテスト

- ユニットテストの説明文は日本語で記載すること
- ユニットテストはラインカバレッジではなく、仕様の分岐（if / switch / early returnなど）に対する条件分岐網羅（condition coverage）を目標とすること
